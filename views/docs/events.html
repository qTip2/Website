<?=$docs_header?>

	<div id="content">
	<div class="center">
		<div id="reference" class="section">
			<h2>Events</h2>
			
			<div id="binding" class="subsection">
				<a name="binding"></a>
				<h3>Binding events</h3>

				<p>
					The API triggers several special events (detailed below) that allow you to bind multiple event handlers to a single qTip and react to certain events. For example,
					we can bind an event handler that will detect when the tooltip is moved, and update a div element with the tooltip coordinates:
				</p>
				
				<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: 'When I move I update coordinates on the page!',
	events: {
		move: function(event, api) {
			$('#coords').text( event.pageX + '/' + event.pageY );
		}
	}
});
CODE
				);?>
				
				<p>
					That's great! Simple and easy to integrate. However, what if we need want to not only to update the coordinates, but integrate say, another plugin with the qTip? One
					that might be in a different file and hard to call within our existing move callback?
				</p>
				
				<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: 'When I move I update coordinates on the page!',
	events: {
		/* 
		 * Since your qTip will likely have prerender set to false, we'll bind within the render event
		 * so we're certain the tooltip is actually rendered before binding our handlers.
		 */
		render: function(event, api) {
			// Grab the tooltip element from the API elements object
			var tooltip = api.elements.tooltip;
			
			// Notice the 'tooltip' prefix of the event name!
			tooltip.bind('tooltipmove', function(event, api) { 
				anotherPlugin.update(event); // Update our other plugin and pass our event object
			})
			
		},
		// Regular old move option still applies
		move: function(event, api) {
			$('#coords').text( event.pageX + '/' + event.pageY );
		}
	}
});
CODE
				);?>
				
				<p>
					Awesome! Binding multiple events is just as simple, and can be used on all the events listed below. Just make sure to <b>prepend your event name with <i>tooltip</i></b>
					when binding events manually.
				</p>
			</div>

			<div id="preventDefault" class="subsection">
				<a name="preventDefault"></a>
				<h3>event.preventDefault()</h3>
				<p>
					As is the case with regular events in JavaScript, you can use the event.preventDefault(); to prevent the default event from occurring. For example, within
					a show event it will stop the tooltip from showing:
				</p>

				<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: 'I won\'t show because one of my show event handlers returns false!',
	show: 'mousedown',
	events: {
		show: function(event, api) {
			event.preventDefault(); // Stop it!
		}
	}
});
CODE
				);?>

				<p>
					This can be handy if you need some conditional logic that determines if the tooltip should show or not. Also be aware that
					<b>any of the event handlers can stop the default action</b>, not just the first one bound.
				</p>
			</div>

			<div id="originalEvent" class="subsection">
				<a name="originalEvent"></a>
				<h3>event.originalEvent</h3>

				<p>
					All of the events below are passed an event object as their first argument. Within this event object is another object
					called originalEvent. This contains the event that triggered the callback, and can be used for special event detection, such as right-clicks:
				</p>
				
				<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: 'Right-click to open me!',
	show: 'mousedown',
	events: {
		show: function(event, api) {
			// Only show the tooltip if it was a right-click
			if(event.originalEvent.button !== 2) {
				event.preventDefault();
			}
		}
	}
});
CODE
				);?>
			</div>
			

			<div class="option">
				<a class="sidetab collapser">&ndash;</a>
				<a class="sidetab anchor" name="render" href="#render">#</a>

				<h5 class="values">tooltiprender</h5>
				<h3 class="name"> <b>render</b><em>:function(){}</em> </h3>

				<div class="collapsable">
					<h4>Overview</h4>
					<p class="overview">
						Fired when the tooltip is rendered
					</p>

					<div class="examples">
						<h4>Examples</h4>
						Update another element e.g. a cart total, when this tooltip is rendered
						<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: {
		text: 'My tooltip content'
	},
	events: {
		render: function(event, api) {
			$('.cartTotal').triggerHandler('update');
		}
	}
});
CODE
						);?>
					</div>

					<div class="seealso">
						<h4>See also</h4>
						<a href="<?=WEB_DIR?>/docs/core/#prerender">prerender</a>
						<a href="<?=WEB_DIR?>/docs/show/#ready">show.ready</a>
					</div>

					<h4>Notes</h4>
					<ul class="notes">
						<li>The rendering process cannot be interrupted using the <a href="#preventDefault">preventDefault();</a> described above.</li>
						<li>This event is triggered only once during the lifetime of a single qTip.</li>
					</ul>
				</div>
			</div>

			<div class="option">
				<a class="sidetab collapser">&ndash;</a>
				<a class="sidetab anchor" name="show" href="#show">#</a>

				<h5 class="values">tooltipshow</h5>
				<h3 class="name"> <b>show</b><em>:function(){}</em> </h3>

				<div class="collapsable">
					<h4>Overview</h4>
					<p class="overview">
						Fired when the tooltip is shown either by the library itself, or by the user calling the appropriate <a href="<?=WEB_DIR?>/docs/api/methods/#toggle">toggle</a> or <a href="<?=WEB_DIR?>/docs/api/methods/#show">show</a> API methods.
					</p>

					<div class="examples">
						<h4>Examples</h4>
						Lets hide another element whenever this tooltip is shown
						<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: {
		text: 'I hide another element when shown...'
	},
	events: {
		show: function(event, api) {
			$('.hideMe').hide();
		}
	}
});
CODE
						);?>
					</div>

					<div class="seealso">
						<h4>See also</h4>
						<a href="<?=WEB_DIR?>/docs/show/">Show options</a>
					</div>

					<h4>Notes</h4>
					<ul class="notes">
						<li>Using <a href="#preventDefault">preventDefault();</a> described above, will prevent the tooltip from showing.</li>
					</ul>
				</div>
			</div>

			<div class="option">
				<a class="sidetab collapser">&ndash;</a>
				<a class="sidetab anchor" name="hide" href="#hide">#</a>

				<h5 class="values">tooltiphide</h5>
				<h3 class="name"> <b>hide</b><em>:function(){}</em> </h3>

				<div class="collapsable">
					<h4>Overview</h4>
					<p class="overview">
						Fired when the tooltip is hidden either by the library itself, or by the user calling the appropriate <a href="<?=WEB_DIR?>/docs/api/methods/#toggle">toggle</a> or <a href="<?=WEB_DIR?>/docs/api/methods/#hide">hide</a> API methods.
					</p>

					<div class="examples">
						<h4>Examples</h4>
						Lets show another element whenever this tooltip is hidden
						<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: {
		text: 'I cause another element to show when I\'m hidden...'
	},
	events: {
		hide: function(event, api) {
			$('.showMe').show();
		}
	}
});
CODE
						);?>
					</div>

					<div class="seealso">
						<h4>See also</h4>
						<a href="<?=WEB_DIR?>/docs/hide/">Hide options</a>
					</div>

					<h4>Notes</h4>
					<ul class="notes">
						<li>Using <a href="#preventDefault">preventDefault();</a> described above, will prevent the tooltip from hiding.</li>
					</ul>
				</div>
			</div>

			<div class="option">
				<a class="sidetab collapser">&ndash;</a>
				<a class="sidetab anchor" name="toggle" href="#toggle">#</a>

				<h5 class="values">tooltipshow tooltiphide</h5>
				<h3 class="name"> <b>toggle</b><em>:function(){}</em> </h3>

				<div class="collapsable">
					<h4>Overview</h4>
					<p class="overview">
						Fired when the tooltip is toggled i.e. shown or hidden, by the user calling the appropriate <a href="<?=WEB_DIR?>/docs/api/methods/#toggle">toggle</a> or 
						<a href="<?=WEB_DIR?>/docs/api/methods/#hide">hide</a> API methods. This is a shortcut method for binding to both <a href="#show">tooltipshow</a> and 
						<a href="#hide">tooltiphide</a> events above.
					</p>

					<div class="examples">
						<h4>Examples</h4>
						We can utilise this hide &amp; show shortcut to implement addition/removal of particular properties like classes without duplicating code:
						<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: {
		text: 'I toggle a class on my target element when shown or hidden!'
	},
	events: {
		toggle: function(event, api) {
			api.elements.target.toggleClass(event.type === 'tooltipshow');
		}
	}
});
CODE
						);?>
					</div>

					<div class="seealso">
						<h4>See also</h4>
						<a href="<?=WEB_DIR?>/docs/show/">Show options</a>
						<a href="<?=WEB_DIR?>/docs/hide/">Hide options</a>
					</div>

					<h4>Notes</h4>
					<ul class="notes">
						<li><b>There is no tooltiptoggle event</b>! This is a shortcut for binding to both <a href="#show">tooltipshow</a> and <a href="#hide">tooltiphide</a>.
						<li>Using <a href="#preventDefault">preventDefault();</a> described above, will prevent the tooltip from showing/hiding, depending on the event type being triggered.</li>
					</ul>
				</div>
			</div>

			<div class="option">
				<a class="sidetab collapser">&ndash;</a>
				<a class="sidetab anchor" name="visible" href="#visible">#</a>

				<h5 class="values">tooltipvisible</h5>
				<h3 class="name"> <b>visible</b><em>:function(){}</em> </h3>

				<div class="collapsable">
					<h4>Overview</h4>
					<p class="overview">
						Fired when the tooltip becomes visible i.e. immediately after the <a href="<?=WEB_DIR?>/docs/show/#effect">show.effect</a> has finished and the qTip is visible and has dimensions. This
						is most useful for plugins and code which requires the tooltip to have layout, that is to be visible and have dimensions, if it is to function correctly.
					</p>
					<p class="overview">
						Because this event is fired <b>after</b> the tooltip is already shown, the <a href="#preventDefault">event.preventDefault();</a> call will do nothing within this event, since it
						is already shown when this event is triggered.
					</p>

					<div class="examples">
						<h4>Examples</h4>
						Let's output the dimensions of tooltip once it becomes visible:
						<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: {
		text: 'I hide another element when shown...'
	},
	events: {
		visible: function(event, api) {
			$('.selector').hide();
		}
	}
});
CODE
						);?>
					</div>

					<div class="seealso">
						<h4>See also</h4>
						<a href="#show">Show event</a>
						<a href="<?=WEB_DIR?>/docs/show/">Show options</a>
					</div>

					<h4>Notes</h4>
					<ul class="notes">
						<li>This is distinct from the <a href="#show">show event</a> since it is fired before the show animation is complete, not after.</li>
						<li>Because of the above, the <a href="#preventDefault">event.preventDefault();</a> call will do nothing within this event, since it is already shown when this event is triggered</li>
					</ul>
				</div>
			</div>

			<div class="option">
				<a class="sidetab collapser">&ndash;</a>
				<a class="sidetab anchor" name="hidden" href="#hidden">#</a>

				<h5 class="values">tooltiphidden</h5>
				<h3 class="name"> <b>hidden</b><em>:function(){}</em> </h3>

				<div class="collapsable">
					<h4>Overview</h4>
					<p class="overview">
						Fired when the tooltip becomes hidden i.e. immediately after the <a href="<?=WEB_DIR?>/docs/hide/#effect">hide.effect</a> has finished, the qTip is hidden (display:none). This
						is most useful for plugins and code which requires the tooltip to be completely hidden, if it is to function correctly.
					</p>
					<p class="overview">
						Because this event is fired <b>after</b> the tooltip is already hidden, the <a href="#preventDefault">event.preventDefault();</a> call will do nothing within this event, since it
						is already hidden when this event is triggered.
					</p>

					<div class="examples">
						<h4>Examples</h4>
						Let's output the dimensions of tooltip once it becomes hidden:
						<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: {
		text: 'I show another element when hidden...'
	},
	events: {
		hidden: function(event, api) {
			$('.selector').show();
		}
	}
});
CODE
						);?>
					</div>

					<div class="seealso">
						<h4>See also</h4>
						<a href="#hide">Hide event</a>
						<a href="<?=WEB_DIR?>/docs/hide/">Hide options</a>
					</div>

					<h4>Notes</h4>
					<ul class="notes">
						<li>This is distinct from the <a href="#hide">hide event</a> since it is fired before the hide animation is complete, not after.</li>
						<li>Because of the above, the <a href="#preventDefault">event.preventDefault();</a> call will do nothing within this event, since it is already shown when this event is triggered</li>
					</ul>
				</div>
			</div>

			<div class="option">
				<a class="sidetab collapser">&ndash;</a>
				<a class="sidetab anchor" name="move" href="#move">#</a>

				<h5 class="values">tooltipmove</h5>
				<h3 class="name"> <b>move</b><em>:function(){}</em> </h3>

				<div class="collapsable">
					<h4>Overview</h4>
					<p class="overview">
						Fired when the tooltip is repositioned, either by the library itself, or when the user calls the <a href="<?=WEB_DIR?>/docs/api/methods/#reposition">reposition</a> API method.
					</p>

					<div class="examples">
						<h4>Examples</h4>
						Let's update another qTips position, whose position target is actually inside this tooltip.
						<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: {
		text: 'When I move, I update all qTips who are positioned in relation to me!'
	},
	events: {
		move: function(event, api) {
			// For more information on the API object, check-out the API documentation
			api.elements.content.find('.hasTooltip').qtip('update');
		}
	}
});
CODE
						);?>
					</div>

					<div class="seealso">
						<h4>See also</h4>
						<a href="<?=WEB_DIR?>/docs/position/">Position options</a>
					</div>

					<h4>Notes</h4>
					<ul class="notes">
						<li>Using <a href="#preventDefault">preventDefault();</a> described above, will prevent the tooltips position from being updated.</li>
					</ul>
				</div>
			</div>

			<div class="option">
				<a class="sidetab collapser">&ndash;</a>
				<a class="sidetab anchor" name="focus" href="#focus">#</a>

				<h5 class="values">tooltipfocus</h5>
				<h3 class="name"> <b>focus</b><em>:function(){}</em> </h3>

				<div class="collapsable">
					<h4>Overview</h4>
					<p class="overview">
						Fired when the tooltip is focused i.e. most recently displayed or moused over, either by the library itself or the <a href="<?=WEB_DIR?>/docs/api/methods/#focus">focus</a> API method.
					</p>

					<div class="examples">
						<h4>Examples</h4>
						Lets create a qTip whose colour is changed when focused.
						<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: {
		text: 'When I gain focus over the other qTips, my colour changes!'
	},
	events: {
		focus: function(event, api) {
			// For more information on the API object, check-out the API documentation
			api.elements.tooltip.toggleClass('ui-tooltip-blue ui-tooltip-cream');
		}
	}
});
CODE
						);?>
					</div>

					<div class="seealso">
						<h4>See also</h4>
						<a href="#blur">Blur event</a>
					</div>

					<h4>Notes</h4>
					<ul class="notes">
						<li>Using <a href="#preventDefault">preventDefault();</a> described above, will prevent the tooltip from becoming focused.</li>
					</ul>
				</div>
			</div>

			<div class="option optionlast">
				<a class="sidetab collapser">&ndash;</a>
				<a class="sidetab anchor" name="blur" href="#blur">#</a>

				<h5 class="values">tooltipblur</h5>
				<h3 class="name"> <b>blur</b><em>:function(){}</em> </h3>

				<div class="collapsable">
					<h4>Overview</h4>
					<p class="overview">
						Fired when the tooltip loses focus i.e. another tooltip becomes focused (<a href="#focus">see above</a>) by the library itself or the <a href="<?=WEB_DIR?>/docs/api/methods/#focus">focus</a> API method.
					</p>

					<div class="examples">
						<h4>Examples</h4>
						Lets create another qTip whose colour is changed when it loses focus, similar to the example above.
						<?php echo $this->highlightCode('javascript', <<<CODE
$('.selector').qtip({
	content: {
		text: 'When I lose focus to another qTip, my colour changes!'
	},
	events: {
		blur: function(event, api) {
			// For more information on the API object, check-out the API documentation
			api.elements.tooltip.toggleClass('ui-tooltip-blue ui-tooltip-cream');
		}
	}
});
CODE
						);?>
					</div>

					<div class="seealso">
						<h4>See also</h4>
						<a href="#focus">Focus event</a>
					</div>

					<h4>Notes</h4>
					<ul class="notes">
						<li>The blurring process cannot be prevented using the <a href="#preventDefault">preventDefault();</a> described above.</li>
					</ul>
				</div>
			</div>
	</div>
	</div>